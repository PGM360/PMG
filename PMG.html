<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>PMG | Enterprise Suite</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #0062ff;
            --bg: #f8fafc;
            --card: #ffffff;
            --text: #1e293b;
            --border: #e2e8f0;
        }

        .dark-theme {
            --bg: #020617;
            --card: #0f172a;
            --text: #f8fafc;
            --border: #1e293b;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Plus Jakarta Sans', sans-serif; }

        body { background: var(--bg); color: var(--text); transition: 0.3s; padding-bottom: 50px; }

        /* Login */
        #loginScreen { position: fixed; inset: 0; background: #020617; display: flex; align-items: center; justify-content: center; z-index: 5000; }
        .login-card { width: 90%; max-width: 400px; background: white; border-radius: 30px; overflow: hidden; box-shadow: 0 20px 50px rgba(0,0,0,0.3); }

        /* Header & Banner */
        header { background: var(--card); padding: 15px 5%; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid var(--border); position: sticky; top: 0; z-index: 1000; }
        .banner { width: 100%; height: 160px; background: linear-gradient(135deg, #003087, #0062ff); display: flex; flex-direction: column; align-items: center; justify-content: center; color: white; margin-bottom: 30px; }

        /* Dashboard Container */
        .container { max-width: 900px; margin: 0 auto; padding: 0 20px; }
        .glass-box { background: var(--card); border-radius: 25px; padding: 25px; border: 1px solid var(--border); margin-bottom: 25px; box-shadow: 0 10px 20px rgba(0,0,0,0.02); }

        /* Form Grid */
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px; }
        @media (max-width: 600px) { .grid { grid-template-columns: 1fr; } }

        label { display: block; font-size: 11px; font-weight: 800; color: #94a3b8; text-transform: uppercase; margin-bottom: 5px; }
        input, select { width: 100%; padding: 12px; border-radius: 12px; border: 1.5px solid var(--border); background: var(--bg); color: var(--text); font-size: 14px; outline: none; }

        /* Buttons */
        .btn { padding: 15px; border-radius: 12px; font-weight: 700; border: none; cursor: pointer; transition: 0.2s; width: 100%; font-size: 14px; }
        .btn-save { background: var(--primary); color: white; box-shadow: 0 10px 15px rgba(0,98,255,0.2); }
        .btn-clear { background: transparent; color: #ef4444; border: 1.5px solid #fee2e2; margin-top: 10px; }
        .btn-view { background: #f1f5f9; color: var(--primary); padding: 8px 12px; border-radius: 8px; font-size: 11px; width: auto; }
        .dark-theme .btn-view { background: #1e293b; color: #60a5fa; }

        /* Archive/Folder List */
        .record-item { display: flex; justify-content: space-between; align-items: center; padding: 15px; border-bottom: 1px solid var(--border); }
        .record-info h4 { font-size: 14px; margin-bottom: 2px; }
        .record-info p { font-size: 11px; color: #94a3b8; }

        /* Modal for Details */
        #detailModal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.7); z-index: 6000; align-items: center; justify-content: center; padding: 20px; }
        .modal-content { background: var(--card); width: 100%; max-width: 500px; border-radius: 25px; padding: 30px; position: relative; }
        .modal-data { margin-top: 20px; font-size: 14px; line-height: 2; }
        .close-modal { position: absolute; top: 20px; right: 20px; cursor: pointer; font-weight: 800; }
    </style>
</head>
<body class="light-theme">

    <div id="loginScreen">
        <div class="login-card">
            <div style="background: var(--primary); padding: 40px; color:white; text-align:center">
                <h1 style="font-size: 32px">PMG</h1>
                <p style="font-size: 10px; letter-spacing: 2px">SECURE ACCESS</p>
            </div>
            <div style="padding: 30px;">
                <label>Authorized Name</label>
                <input type="text" id="loginName" placeholder="SOMAIL or SHERAZ" style="margin-bottom: 15px;">
                <button class="btn btn-save" onclick="handleLogin()">Login</button>
            </div>
        </div>
    </div>

    <div id="mainDashboard" style="display:none">
        <header>
            <h2 style="font-weight: 800; color: var(--primary);">PMG.</h2>
            <div style="display: flex; gap: 10px;">
                <button onclick="toggleTheme()" style="background:none; border:none; cursor:pointer; font-size:12px; font-weight:700; color:var(--primary)">ðŸŒ“ THEME</button>
                <button onclick="location.reload()" style="background:none; border:none; cursor:pointer; font-size:12px; font-weight:700; color:#ef4444">LOGOUT</button>
            </div>
        </header>

        <div class="banner">
            <h2 id="welcomeMsg">Welcome</h2>
            <p id="agentBadge" style="background:rgba(255,255,255,0.2); padding:4px 12px; border-radius:50px; font-size:10px; margin-top:8px">AGENT ONLINE</p>
        </div>

        <div class="container">
            <div class="glass-box">
                <h3 style="margin-bottom:20px; font-size:16px">Campaign Entry</h3>
                <form id="pmgForm">
                    <div class="grid">
                        <div><label>Channel</label><input type="text" id="channel" required></div>
                        <div><label>Email</label><input type="email" id="email" required></div>
                    </div>
                    <div class="grid">
                        <div><label>Password</label><input type="password" id="password" required></div>
                        <div><label>Manager</label><input type="text" id="manager" required></div>
                    </div>
                    <div class="grid">
                        <div><label>Device ID</label><input type="text" id="device" required></div>
                        <div><label>Date</label><input type="date" id="date" required></div>
                    </div>
                    <div class="grid">
                        <div><label>Mobile</label>
                            <select id="mobile">
                                <option>Samsung F12</option>
                                <option>Tecno Spark 40</option>
                                <option>Redmi 8</option>
                            </select>
                        </div>
                        <div><label>Sold</label>
                            <select id="sold">
                                <option>Yes</option>
                                <option>No</option>
                            </select>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-save">Save & Sync Record</button>
                    <button type="button" class="btn btn-clear" onclick="clearForm()">Clear Form Data</button>
                </form>
            </div>

            <div class="glass-box">
                <h3 style="margin-bottom:15px; font-size:16px">Review Archives (Saved Folders)</h3>
                <div id="archiveList">
                    </div>
            </div>
        </div>
    </div>

    <div id="detailModal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal()">âœ•</span>
            <h3 style="color:var(--primary)">Record Details</h3>
            <div id="modalBody" class="modal-data"></div>
            <button class="btn btn-save" style="margin-top:20px" onclick="closeModal()">Close Preview</button>
        </div>
    </div>

    <script>
        let agent = "";
        const users = ["SOMAIL", "SHERAZ"];

        function handleLogin() {
            const val = document.getElementById('loginName').value.trim().toUpperCase();
            if(!users.includes(val)) return alert("Access Denied!");
            agent = val;
            document.getElementById('loginScreen').style.display = 'none';
            document.getElementById('mainDashboard').style.display = 'block';
            document.getElementById('welcomeMsg').innerText = `Welcome, ${agent}`;
            loadArchive();
        }

        document.getElementById('pmgForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const record = {
                id: Date.now(),
                agent: agent,
                channel: document.getElementById('channel').value,
                email: document.getElementById('email').value,
                pass: document.getElementById('password').value,
                manager: document.getElementById('manager').value,
                device: document.getElementById('device').value,
                date: document.getElementById('date').value,
                mobile: document.getElementById('mobile').value,
                sold: document.getElementById('sold').value
            };

            // Save to LocalStorage
            let history = JSON.parse(localStorage.getItem(`pmg_data_${agent}`)) || [];
            history.unshift(record);
            localStorage.setItem(`pmg_data_${agent}`, JSON.stringify(history));

            // Generate File
            const blob = new Blob([JSON.stringify(record, null, 2)], {type: 'text/plain'});
            const a = document.createElement('a');
            a.href = URL.createObjectURL(blob);
            a.download = `PMG_${agent}_${record.date}.txt`;
            a.click();

            alert("Record Saved Successfully!");
            document.getElementById('pmgForm').reset();
            loadArchive();
        });

        function loadArchive() {
            const list = document.getElementById('archiveList');
            const data = JSON.parse(localStorage.getItem(`pmg_data_${agent}`)) || [];
            if(data.length === 0) { list.innerHTML = "<p style='font-size:12px; color:#94a3b8'>No records found.</p>"; return; }
            
            list.innerHTML = data.map(item => `
                <div class="record-item">
                    <div class="record-info">
                        <h4>${item.channel}</h4>
                        <p>Date: ${item.date} | Status: ${item.sold}</p>
                    </div>
                    <button class="btn-view" onclick="viewDetails(${item.id})">VIEW DETAILS</button>
                </div>
            `).join('');
        }

        function viewDetails(id) {
            const data = JSON.parse(localStorage.getItem(`pmg_data_${agent}`));
            const item = data.find(x => x.id === id);
            const body = document.getElementById('modalBody');
            body.innerHTML = `
                <b>Channel:</b> ${item.channel}<br>
                <b>Email:</b> ${item.email}<br>
                <b>Password:</b> ${item.pass}<br>
                <b>Manager:</b> ${item.manager}<br>
                <b>Device:</b> ${item.device}<br>
                <b>Mobile:</b> ${item.mobile}<br>
                <b>Date:</b> ${item.date}<br>
                <b>Sold:</b> ${item.sold}
            `;
            document.getElementById('detailModal').style.display = 'flex';
        }

        function clearForm() {
            if(confirm("Are you sure you want to clear the form?")) {
                document.getElementById('pmgForm').reset();
            }
        }

        function closeModal() { document.getElementById('detailModal').style.display = 'none'; }
        function toggleTheme() { document.body.classList.toggle('dark-theme'); }
    </script>
</body>
</html>
